---

title: Pipeline


keywords: fastai
sidebar: home_sidebar

summary: "API details."
description: "API details."
nb_path: "00_Pipeline.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 00_Pipeline.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_data" class="doc_header"><code>get_data</code><a href="https://github.com/MeherKh/nbdevPipeline/tree/master/nbdevPipeline/Pipeline.py#L19" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_data</code>(<strong><code>path</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="surface-&amp;-nb_chambre-columns-have-null-values">surface &amp; nb_chambre columns have null values<a class="anchor-link" href="#surface-&amp;-nb_chambre-columns-have-null-values"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="TransformeeMaison" class="doc_header"><code>class</code> <code>TransformeeMaison</code><a href="https://github.com/MeherKh/nbdevPipeline/tree/master/nbdevPipeline/Pipeline.py#L24" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>TransformeeMaison</code>(<strong><code>dateTo</code></strong>=<em><code>'annee'</code></em>) :: <code>BaseEstimator</code></p>
</blockquote>
<p>Base class for all estimators in scikit-learn.</p>
<h2 id="Notes">Notes<a class="anchor-link" href="#Notes"> </a></h2><p>All estimators should specify all the parameters that can be set
at the class level in their <code>__init__</code> as explicit keyword
arguments (no <code>*args</code> or <code>**kwargs</code>).</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Diviser-les-donn&#233;es-en-train-et-test">Diviser les donn&#233;es en train et test<a class="anchor-link" href="#Diviser-les-donn&#233;es-en-train-et-test"> </a></h4>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="split_data" class="doc_header"><code>split_data</code><a href="https://github.com/MeherKh/nbdevPipeline/tree/master/nbdevPipeline/Pipeline.py#L64" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>split_data</code>(<strong><code>X</code></strong>, <strong><code>y</code></strong>, <strong><code>test_size</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">X_train</span><span class="p">,</span><span class="n">X_test</span><span class="p">,</span><span class="n">y_train</span><span class="p">,</span><span class="n">y_test</span> <span class="o">=</span> <span class="n">split_data</span><span class="p">(</span><span class="n">X</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="mf">0.2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Appliquer-la-normalisation-sur-les-donn&#233;es">Appliquer la normalisation sur les donn&#233;es<a class="anchor-link" href="#Appliquer-la-normalisation-sur-les-donn&#233;es"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Appliquer-le-ACP-sur-les-donn&#233;es">Appliquer le ACP sur les donn&#233;es<a class="anchor-link" href="#Appliquer-le-ACP-sur-les-donn&#233;es"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="La-mise-en-place-du-Pipeline-+-GridSearch-+-Modelling">La mise en place du Pipeline + GridSearch + Modelling<a class="anchor-link" href="#La-mise-en-place-du-Pipeline-+-GridSearch-+-Modelling"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h5 id="la-pipe-commence-par-appliquer-les-transformations-puis-elle-fait-la-normalisation-et-le-PCA">la pipe commence par appliquer les transformations puis elle fait la normalisation et le PCA<a class="anchor-link" href="#la-pipe-commence-par-appliquer-les-transformations-puis-elle-fait-la-normalisation-et-le-PCA"> </a></h5><h5 id="Enfin-elle-termine-par-appliquer-le-SVM-pour-la-pr&#233;diction">Enfin elle termine par appliquer le SVM pour la pr&#233;diction<a class="anchor-link" href="#Enfin-elle-termine-par-appliquer-le-SVM-pour-la-pr&#233;diction"> </a></h5>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Pipy" class="doc_header"><code>class</code> <code>Pipy</code><a href="https://github.com/MeherKh/nbdevPipeline/tree/master/nbdevPipeline/Pipeline.py#L69" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Pipy</code>(<strong><code>Pipe</code></strong>, <strong><code>Params</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">Pipe</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">([</span>
                 <span class="p">(</span><span class="s1">&#39;trsf&#39;</span><span class="p">,</span><span class="n">TransformeeMaison</span><span class="p">()),</span>
                 <span class="p">(</span><span class="s1">&#39;ss&#39;</span><span class="p">,</span><span class="n">StandardScaler</span><span class="p">()),</span>
                 <span class="p">(</span><span class="s1">&#39;pca&#39;</span><span class="p">,</span><span class="n">PCA</span><span class="p">()),</span>
                 <span class="p">(</span><span class="s1">&#39;svm&#39;</span><span class="p">,</span><span class="n">SVC</span><span class="p">())</span>
                <span class="p">])</span>
<span class="c1">##les params sont pour le gridsearch pour trouver la meilleur combinaison</span>
<span class="n">Params</span> <span class="o">=</span><span class="p">{</span>
    <span class="s1">&#39;trsf__dateTo&#39;</span><span class="p">:(</span><span class="s1">&#39;age&#39;</span><span class="p">,</span><span class="s1">&#39;annee&#39;</span><span class="p">),</span>
    <span class="s1">&#39;pca__n_components&#39;</span> <span class="p">:</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span>
    <span class="s1">&#39;svm__kernel&#39;</span><span class="p">:(</span><span class="s1">&#39;linear&#39;</span><span class="p">,</span><span class="s1">&#39;rbf&#39;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">p</span> <span class="o">=</span><span class="n">Pipy</span><span class="p">(</span><span class="n">Pipe</span><span class="p">,</span><span class="n">Params</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">gridSearchy</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span><span class="n">y_train</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>GridSearchCV(cv=3,
             estimator=Pipeline(steps=[(&#39;trsf&#39;, TransformeeMaison()),
                                       (&#39;ss&#39;, StandardScaler()), (&#39;pca&#39;, PCA()),
                                       (&#39;svm&#39;, SVC())]),
             n_jobs=-1,
             param_grid={&#39;pca__n_components&#39;: (2, 3),
                         &#39;svm__kernel&#39;: (&#39;linear&#39;, &#39;rbf&#39;),
                         &#39;trsf__dateTo&#39;: (&#39;age&#39;, &#39;annee&#39;)})</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">gridBestEstimator</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Pipeline(steps=[(&#39;trsf&#39;, TransformeeMaison(dateTo=&#39;age&#39;)),
                (&#39;ss&#39;, StandardScaler()), (&#39;pca&#39;, PCA(n_components=2)),
                (&#39;svm&#39;, SVC())])</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

